---
timezone::timezone: "UTC"
ssh::server_options:
  Port: 2712
  Protocol: 2
  AddressFamily: "inet"
  HostKey:
    - "/etc/ssh/ssh_host_rsa_key"
    - "/etc/ssh/ssh_host_ecdsa_key"
    - "/etc/ssh/ssh_host_ed25519_key"
  SyslogFacility: "AUTH"
  LogLevel: "INFO"
  LoginGraceTime: 120
  PubkeyAuthentication: "yes"
  IgnoreUserKnownHosts: "no"
  IgnoreRhosts: "no"
  GSSAPIAuthentication: "yes"
  GSSAPICleanupCredentials: "yes"
  UsePAM: "yes"
  AllowTcpForwarding: "yes"
  X11Forwarding: "yes"
  X11UseLocalhost: "yes"
  PrintMotd: "no"
  TCPKeepAlive: "yes"
  ClientAliveInterval: 0
  ClientAliveCountMax: 3
  XAuthLocation: "/usr/bin/xauth"
  Subsystem: "sftp /usr/libexec/openssh/sftp-server"
  AuthorizedKeysCommand: "/usr/bin/sss_ssh_authorizedkeys"
  AuthorizedKeysCommandUser: "nobody"

easy_ipa::idstart: 70000
easy_ipa::idmax: 79999
easy_ipa::domain: "lsst.cloud"
easy_ipa::ipa_master_fqdn: "ipa1.tuc.lsst.cloud"
# easy_ipa client options
easy_ipa::ipa_role: "client"
easy_ipa::configure_ntp: false
easy_ipa::install_epel: false
easy_ipa::install_autofs: false
easy_ipa::install_sssdtools: false
easy_ipa::install_kstart: false
easy_ipa::configure_sshd: false
ssh::client_options:
  GlobalKnownHostsFile: "/var/lib/sss/pubconf/known_hosts"
  PubkeyAuthentication: "yes"
  ProxyCommand: "/usr/bin/sss_ssh_knownhostsproxy -p %p %h"

sudo::config_file_replace: false
sudo::purge: false
sudo::configs:
  wheel_b:  # backup wheel group in case of LDAP failure.
    content: "%wheel_b ALL=(ALL) NOPASSWD: ALL"
lookup_options:
  accounts::user_list:
    merge:
      strategy: "deep"
accounts::group_list:
  wheel_b: {}
accounts::user_defaults:
  managehome: true
  system: false
  managevim: false
accounts::user_list:
  root:
    sshkeys:
      # foreman-proxy
      - "ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDsF9VQ7wjm0Rm/1HA6Zc94IAkhqol5cwT44MwwR6uzDyo+/tqa8awUnmVF+RyiJaR6NEKO6YhjkIPga7rDQJerCMLg/xfFzpRcKSi+Xw5YCQ3Z+4P8XZrICM2vzDV6rBELl4n8Bzk6ncXOcKwbUitw3aj6bJNduv6hGrhkJKlWob+cXGH+KZwDiLX82hxsWmktRWcwDEaXTFWq6dahg3/0niAojkfo2ZlJtRblSEgUBf7JITeXBGYAunAeUYE93xUC9tB1OIzisQLQKCFM2OgSjnO4NSx2r4nIPYhEOEhBnNBqF9mPqalRjoyimvF+lu/vsZ43r7nZyV4RwYbyfmVL foreman-proxy@foreman.ls.lsst.org"
  jhoblitt_b:  # backup access in case LDAP fails
    groups:
      - "wheel_b"
    sshkeys:
      - "ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQDZFV9AL2qPh6CV+DeY32oyg0jCkxkbCHVSPHOoikDkwzwMW/7QQdRI8TJ0h8vpFi15pNyu+n7s7MJSWdg5yUvTCataVpOndDElDz10DaEcGIHNq8/qjEPiHulj/KUoDkEU+yMoWY8jRs3ARyL+6p6LDUBsWpzIY8jMOaEVUJjlVt+0ih2a/D3re0daws6w3mBbmLjitHLS5f2YJKlStIHWCWjMXvP5tqUsvhHvIQH/csBQGXnUiRxR8YSJK9u3CMvTzx6PnC7p98yRCOOrMRQ7yT7vuXyXsk7qoUpArUe/T5nEcwRA/21QVurJ1s3in/mpFI0Ogg5kD7NpFqoTq6itBxbPz7DwaOyjEltJBjQAEvuvfHDJYsBTM3fpfEt5jR8ieuDta1214tr5qVOmR17JonssV7/ksizATm1KkMA7+Q8CWCgrFdZmEMaFjav2U72EWyLRe5utxQV+dWPnxd13NxVu6sgM3CBEC4HzOBMf+upt8tMvjLBjci1sbhCAvvU= github2"
  athebo_b:  # backup access in case LDAP fails
    groups:
      - "wheel_b"
    sshkeys:
      - "ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIE8XVjITG6l2q37rDrL037aB2vDr0HsdXAl1ffmhj9TK adrien@faraday"
  hreinking_b:  # backup access in case LDAP fails
    groups:
      - "wheel_b"
    sshkeys:
      - "ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQCn8ssc5uxsHRdhvykrrQWiDMLzpjH/GC2011SyQBpBS43grDpxpGXXSL28LTMRxw3TZhAL4F1szLWR0O7kmKwTcK5OyF/7X/qvZ+w8ZtOxIU/FsSWEXbG2wrkX7fT+SvF/1WS97cu/EacjmFdQUQyYwPcF3MvmBMp3Hk1eSgJA97I7dUiUJjPda2iNFCnaTW9yJIUYfBPvXeO2FePzCUp8ImBZSkst/VLMTrTQ9DFB+Aj0E8npet8JFn2pUxG198yS2MH7tr3s9XKCUcpUXqySQNwIbtNsEKXljpxpQ3ftcaxo3fw0tgjdBr5BDjrBXbVsw+eVz3vwT7GvGHCGTeDP hreinking@NBB40230-1-A.local"

tuned::profile: "latency-performance"
puppet_agent::package_version: "6.7.0"
puppet_agent::collection: "puppet6"

rsyslog::config::global_config:
  workDirectory:
    value: "/var/lib/rsyslog"
  maxMessageSize:
    value: "64k"
  preserveFQDN:
    value: "on"
rsyslog::config::modules:
  imuxsock: {}
  imjournal:
    config:
      StateFile: "imjournal.state"
      IgnorePreviousMessages: "off"
      Ratelimit.Interval: 600
      Ratelimit.Burst: 20000
  imklog: {}
  immark: {}
  imfile: {}

rsyslog::config::actions:
#Send copy to logs to Ruka Cluster
  graylogCloud:
    type: "omfwd"
    facility: "*.*"
    config:
      Target: "collector.lsst.cloud"
      Port: 5514
      Protocol: "udp"
#Send copy to logs to Base Graylog instance
  graylogBase:
    type: "omfwd"
    facility: "*.*"
    config:
      Target: "collector.ls.lsst.org"
      Port: 5514
      Protocol: "udp"
  messages:
    type: "omfile"
    facility: "*.info;mail.none;authpriv.none;cron.none;local6.none"
    config:
      file: "/var/log/messages"
  secure:
    type: "omfile"
    facility: "authpriv.*"
    config:
      file: "/var/log/secure"
  emerg:
    type: "omusrmsg"
    facility: "*.emerg"
    config:
      users: "*"
  maillog:
    type: "omfile"
    facility: "mail.*"
    config:
      file: "-/var/log/maillog"
  cron:
    type: "omfile"
    facility: "cron.*"
    config:
      file: "/var/log/cron"
  boot:
    type: "omfile"
    facility: "local7.*"
    config:
      file: "-/var/log/boot.log"
