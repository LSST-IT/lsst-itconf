---
classes:
  - "icinga2"
  - "icinga2::pki::ca"
  - "icingaweb2"
  - "mysql::server"
  - "profile::core::common"
  - "profile::core::icingaweb2conf"
  - "yum"
packages:
  - "bash-completion"
  - "bash-completion-extras"
  - "vim"
  - "git"
  - "centos-release-scl"
  - "https://rpms.remirepo.net/enterprise/remi-release-7.rpm"
icinga2::manage_repo: true
icinga2::confd: false
icinga2::constants:
  ZoneName: "master"
  TicketSalt: "5a3d695b8aef8f18452fc494593056a4"
icinga2::feature::api::pki: "none"
icinga2::feature::api::accept_commands: true
icinga2::feature::api::accept_config: true
icinga2::feature::api::endpoints:
  - "it-icinga.ls.lsst.org"
  - "foreman.ls.lsst.org"
icinga2::feature::api::zones:
  - "master":
      "endpoints": "it-icinga.ls.lsst.org"
  - "BDC":
      "endpoints": "foreman.ls.lsst.org"
      "parent": "master"
icingaweb2::config::resource:
  "rubinobs":
    type: "ldap"
    host: "139.229.135.6"
    port: "389"
    ldap_root_dn: "cn=users,cn=accounts,dc=lsst,dc=cloud"
    ldap_bind_dn: "uid=svc_graylog,cn=users,cn=accounts,dc=lsst,dc=cloud"
    ldap_bind_pw: "um0l7BmP;$WU"
icingaweb2::config::authmethod:
  "ldap-auth":
    backend: "ldap"
    resource: "rubinops"
    ldap_user_class: "user"
    ldap_filter: "memberof=cn=icinga-admins,cn=groups,cn=accounts,dc=lsst,dc=cloud"
    ldap_user_name_attribute: "cn"
icingaweb2::config::groupbackend:
  "ldap-groups":
    backend: "ldap"
    resource: "rubinobs"
    ldap_group_class: "group"
    ldap_group_name_attribute: "cn"
    ldap_group_member_attribute: "member"
    ldap_base_dn: "cn=groups,cn=accounts,dc=lsst,dc=cloud"
    domain: "lsst.org"
icingaweb2::config::role:
  'Admin Users':
    groups: "icinga-admins"
    permissions: "*"
icingaweb2::module::monitoring:ido_host: "it-icinga.ls.lsst.org"
icingaweb2::module::monitoring:ido_db_type: "mysql"
icingaweb2::module::monitoring:ido_db_name: "icinga2"
icingaweb2::module::monitoring:ido_db_username: "icinga2"
icingaweb2::module::monitoring:ido_db_password: "supersecret"
icingaweb2::module::monitoring:commandtransports::icinga2:
  transport: "api"
  username: "icingaweb2"
  password: "supersecret"
icinga2::object::zone::global-templates::global: true
profile::core::kernel::version: "3.10.0-1127.8.2.el7.x86_64"
mysql::db:
  "icinga2":
    user: "myuser"
    password: "mypass"
    host: "localhost"
    grant: ['SELECT', 'UPDATE']